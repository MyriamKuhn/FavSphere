openapi: 3.0.3
info:
  title: FavSphere API
  description: |-
    The FavSphere API enables users to save, organize and comment on their favorite links in customized categories. 
    
    Thanks to link management features, users can structure their favorites, group them together, and annotate them for easy, organized access. 
    
    This API uses JWT tokens to secure exchanges, ensuring that only authorized people can access data. 
    
    It is designed for private use, with centralized user database management.

    Some useful links:
    - [The FavSphere repository](https://github.com/MyriamKuhn/FavSphere)
    - [The FavSphere website](https://favsphere.myriamkuhn.com)
  version: 1.0.0
servers:
  - url: http://favsphere.local/app/
tags:
  - name: category
    description: Everything you need to manage the categories
  - name: link
    description: Everything you need to manage the links
  - name: user
    description: Operations about user
paths:
  /categories:
    get:
      tags:
        - category
      summary: Retrieve the list of categories
      description: Get a list of all available categories
      operationId: getCategories
      responses:
        '200':
          description: Successful operation - list of categories
          content:
            application/json:
              schema:
                type: object
                properties:
                  categories:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
        '404':
          description: No category found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Aucune catégorie trouvée"
        '401':
          description: Missing or invalid JWT
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Accès refusé. JWT manquant ou invalide"
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "La méthode n'est pas autorisée"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Erreur interne du serveur"
  /addCategory:
    post:
      tags:
        - category
      summary: Add a new category
      description: Add a new category to the list
      operationId: addCategory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - color
              properties:
                name:
                  type: string
                  description: "Category name"
                  example: "Travail"
                color:
                  type: string
                  description: "Color associated with category"
                  example: "#FF5733"
      responses:
        '201':
          description: Category successfully added
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Catégorie ajoutée avec succès"
        '400':
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Données incorrectes ou manquantes."
        '401':
          description: Missing or invalid JWT
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Accès refusé. JWT manquant ou invalide"
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Méthode non autorisée"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Erreur interne du serveur"
  /updateCategory:
    put:
      tags:
        - category
      summary: Modify a category
      description: Modify the name or color of a category
      operationId: updateCategory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - name
                - color
              properties:
                id:
                  type: integer
                  description: "Category ID"
                  example: 1
                name:
                  type: string
                  description: "Category name"
                  example: "Travail"
                color:
                  type: string
                  description: "Color associated with category"
                  example: "#FF5733"
      responses:
        '200':
          description: Category successfully updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Catégorie modifiée avec succès"
        '400':
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Données incorrectes ou manquantes."
        '401':
          description: Missing or invalid JWT
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Accès refusé. JWT manquant ou invalide"
        '404':
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "La catégorie n'existe pas"
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Méthode non autorisée"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Erreur interne du serveur"
  /deleteCategory:
    delete:
      tags:
        - category
      summary: Delete a category
      description: Delete a category from the list
      operationId: deleteCategory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: "Category ID"
                  example: 1
      responses:
        '200':
          description: Category successfully deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "La catégorie a été supprimée avec succès."
        '400':
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Données incorrectes ou manquantes."
        '401':
          description: Missing or invalid JWT
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Accès refusé. JWT manquant ou invalide"
        '404':
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "La catégorie n'existe pas"
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Méthode non autorisée"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Erreur interne du serveur"
        '503':
          description: Category can not be deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Impossible de supprimer la catégorie."




components:
  schemas:
    Category:
      type: object
      properties:
        id:
          type: integer
          description: "Category ID"
          example: 1
        name:
          type: string
          description: "Category name"
          example: "Travail"
        color:
          type: string
          description: "Color associated with category"
          example: "#FF5733"
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Please enter your Bearer token"
security:
  - Bearer: []
